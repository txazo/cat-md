# 消息重复

## 消息重复的原因

### 生产者消息重复

* 生产者消息发送失败重试

### 消费者消息重复

* 消息已消费，offset因网络原因提交失败
* 消息已消费，offset未来得及提交
  * 消费者宕机
  * rebalance

## 消息重复解决方案

### 生产者消息重复解决方案

* 生产者消息发送失败不重试，`retries=0`
* 消费者幂等

### 消费者消息重复解决方案

* 消费者幂等
